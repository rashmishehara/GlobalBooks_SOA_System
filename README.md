# üìö GlobalBooks SOA Platform üìñ  

GlobalBooks Inc. was facing challenges with a monolithic system that had become slow, rigid, and risky to update. Any small modification required redeploying the whole application, which increased downtime during peak loads. To address this, I re-engineered the platform using **Service-Oriented Architecture (SOA)**, separating it into four dedicated services: **Catalog, Orders, Payments, and Shipping**. Each runs independently, communicates via standard protocols (SOAP, REST, RabbitMQ, BPEL), and is secured with WS-Security (SOAP) and OAuth2 (REST).  

---

## ‚öôÔ∏è Key Features  

- **Hybrid Service Model** ‚Äì Smooth interaction of SOAP- and REST-based services  
- **Asynchronous Messaging** ‚Äì RabbitMQ as the backbone for enterprise integration  
- **End-to-End Security** ‚Äì OAuth2 for REST APIs, WS-Security for SOAP services  
- **Elastic Scaling** ‚Äì Dockerized microservices, deployable on Kubernetes  
- **Observability** ‚Äì Health probes and performance metrics included  
- **Comprehensive Docs** ‚Äì APIs, architecture, and workflow documentation provided  
- **Robust Testing** ‚Äì Automated unit, integration, and performance test suites  

---

## ü™© Architecture Blueprint  

### üìå Core Services  

1. **Catalog Service (SOAP)** ‚Äì Port 8081  
   - Framework: Java Spring Boot with JAX-WS  
   - Protocol: SOAP secured by WS-Security  
   - Capabilities:  
     * Book catalog management  
     * Availability & price lookups  
     * Category browsing & search  
     * Inventory synchronization  
   - Exposes: WSDL for client discovery  

2. **Orders Service (REST)** ‚Äì Port 8088  
   - Framework: Java Spring Boot  
   - Security: OAuth2  
   - Capabilities:  
     * Full order lifecycle handling  
     * Order history & tracking  
     * Orchestration of business logic  
     * Publishes domain events  
   - Integrates with RabbitMQ  

3. **Payments Service (REST)** ‚Äì Port 8083  
   - Framework: Java Spring Boot  
   - Capabilities:  
     * Payment initiation & processing  
     * Multi-method payment options  
     * Transaction & refund management  
     * PCI-DSS ready for compliance  

4. **Shipping Service (REST)** ‚Äì Port 8084  
   - Framework: Java Spring Boot  
   - Capabilities:  
     * Shipment creation & tracking  
     * Delivery time estimation  
     * Integration with multiple carriers  
     * Address validation & updates  

---

### üìå Integration Components  

1. **RabbitMQ**  
   - Works as ESB backbone  
   - Supports async communication  
   - DLQ for failed events  
   - Reliable message persistence  

2. **BPEL Orchestration**  
   - Coordinates fulfillment process  
   - Handles distributed transactions  
   - Provides error compensation flows  
   - Enables monitoring of business processes  

3. **Security Stack**  
   - OAuth2 + JWT for REST APIs  
   - WS-Security (UsernameToken) for SOAP  
   - RBAC for role-level access  
   - Keycloak integration for IAM  

---

## üñ•Ô∏è System Setup Requirements  

### Development  
- JDK 17+  
- Maven 3.9+  
- Docker 20.10+ & Docker Compose 2.0+  
- Git 2.0+  
- At least 8GB RAM (16GB recommended)  
- 20GB free disk space  

### Production  
- Kubernetes cluster v1.20+  
- Per node: 16GB RAM, 4 CPU cores, 50GB storage  
- Load Balancer & Persistent Volumes enabled  

---

## ‚ô®Ô∏è Quick Installation Guide  

1. **Get the Code**  
   ```bash
   # Clone the repository
   git clone <repository-url>
   cd SOA

   # Setup environment variables
   cp .env.example .env
   # Edit .env with your configs
   ```  

2. **Build & Deploy**  
   ```bash
   # Build all services
   ./13-scripts/build-all-services.sh

   # Deploy using Docker Compose
   cd 10-deployment
   docker compose up -d --build
   ```  

3. **Check Service Health**  
   ```bash
   # Run health check script
   ./13-scripts/verify-deployment.sh
   ```  
   Or visit:  
   - Catalog WSDL ‚Üí http://localhost:8081/soap/catalog?wsdl  
   - Orders ‚Üí http://localhost:8088/api/v1/orders/health  
   - Payments ‚Üí http://localhost:8083/api/v1/payments/health  
   - Shipping ‚Üí http://localhost:8084/api/v1/shippings/health  
   - RabbitMQ ‚Üí http://localhost:15672 (admin/password123)  

4. **View Docs**  
   - API Docs: http://localhost:8082/swagger-ui.html  
   - Diagrams: `01-design-artifacts/architecture-diagrams/`  
   - Integration Guide: `11-documentation/integration-guide.md`  

---

## ‚è∫Ô∏è Service Endpoints  

### Orders REST API  

```
POST   /api/v1/orders                    # Create new order
GET    /api/v1/orders                    # Get all orders
GET    /api/v1/orders/{id}               # Get order by ID
PUT    /api/v1/orders/{id}/status        # Update order status
DELETE /api/v1/orders/{id}               # Cancel order
GET    /api/v1/orders/health             # Health check
```

### Payments REST API  

```
POST   /api/v1/payments/initiate         # Initiate payment
POST   /api/v1/payments/{id}/process     # Process payment
GET    /api/v1/payments/{id}             # Get payment details
GET    /api/v1/payments/order/{orderId}  # Get payments by order
GET    /api/v1/payments/health           # Health check
```

### Shipping REST API  

```
POST   /api/v1/shippings                 # Create shipping
POST   /api/v1/shippings/{id}/process    # Process shipping
GET    /api/v1/shippings/{id}            # Get shipping details
GET    /api/v1/shippings/tracking/{num}  # Track shipment
GET    /api/v1/shippings/health          # Health check
```

### Catalog SOAP API  
- WSDL: `http://localhost:8081/soap/catalog?wsdl`  
- Operations: `searchBooks`, `getBookById`, `getBookPrice`, `checkAvailability`  

---

## üì© Event Workflow  

1. **Order Creation**: Client submits an order via Orders Service REST API
2. **Event Publishing**: Orders Service publishes events to RabbitMQ  
3. **Payment Processing**: Payments Service processes payment event  
4. **Shipping Processing**: Shipping Service handles shipment event  
5. **Orchestration**: BPEL manages orchestration of the overall flow  

---

## üîê Security  

- Current:  
  * REST ‚Üí OAuth2 with JWT  
  * SOAP ‚Üí Basic Auth (WS-Security optional)  
  * Keycloak available for identity management  

- Upcoming:  
  * Full WS-Security (UsernameToken) for SOAP  
  * Advanced OAuth2 configs  
  * Mutual TLS between services  

---

## ‚ùì Testing  

### Postman Collections
- `09-testing/postman/GlobalBooks-SOA-Catalog.postman_collection.json`
- `09-testing/postman/GlobalBooks_Orders_API.postman_collection.json`

### SOAP UI Tests
- `09-testing/soap-ui/CatalogService-TestSuite.xml`

---

## üîÄ Development Setup  

### Setting Up Development Environment

1. **Install Required Tools**
   ```bash
   # Verify Java 17+ installation
   java -version
   
   # Verify Maven 3.9+
   mvn -version
   
   # Verify Docker
   docker --version
   docker-compose --version
   ```

2. **Configure Environment**
   ```bash
   # Set up development environment
   cd 13-scripts
   ./setup-environment.sh
   ```

### Building Individual Services

```bash
# Catalog Service
cd 02-catalog-service
mvn clean package

# Orders Service
cd 03-orders-service
mvn clean package

# Payments Service
cd 04-payments-service
mvn clean package

# Shipping Service
cd 05-shipping-service
mvn clean package
```

### Running Services Locally
   ```bash
   # Catalog Service (Port 8081)
   cd 02-catalog-service
   mvn spring-boot:run

   # Orders Service (Port 8088)
   cd 03-orders-service
   mvn spring-boot:run

   # Payments Service (Port 8083)
   cd 04-payments-service
   mvn spring-boot:run

   # Shipping Service (Port 8084)
   cd 05-shipping-service
   mvn spring-boot:run
   ```

3. **Verify Services**
   ```bash
   # Check health endpoints
   curl http://localhost:8081/soap/catalog?wsdl
   curl http://localhost:8088/api/v1/orders/health
   curl http://localhost:8083/api/v1/payments/health
   curl http://localhost:8084/api/v1/shippings/health
   ```

### Development Best Practices

1. **Code Quality**
   - Run static code analysis:
     ```bash
     mvn sonar:sonar
     ```
   - Format code before commit:
     ```bash
     mvn formatter:format
     ```

2. **Testing**
   - Run unit tests:
     ```bash
     mvn test
     ```
   - Run integration tests:
     ```bash
     mvn verify
     ```
   - Load test scripts available in `09-testing/performance/`

3. **Documentation**
   - Update API documentation in `11-documentation/api-docs/`
   - Generate updated API docs:
     ```bash
     mvn javadoc:javadoc
     ```

---

## üìà Monitoring  

- Health endpoints on each service  
- RabbitMQ dashboard for messaging stats  
- Spring Boot Actuator for metrics collection  

---

## üîÑ Deployment Options  

- **Docker** ‚Üí `docker compose up -d --build`  
- **Kubernetes** ‚Üí manifests in `10-deployment/kubernetes/`  

---

## üßÆ Architecture Patterns Demonstrated  

- **Service-Oriented Architecture (SOA)**
- **Enterprise Service Bus (ESB)**
- **Event-Driven Architecture**
- **Microservices**
- **API Gateway Pattern**
- **Circuit Breaker Pattern**
- **Saga Pattern** (via BPEL orchestration)

---

## üõ†Ô∏è Technologies Used  

- **Java 17** - Primary programming language
- **Spring Boot** - Application framework
- **Spring Web Services** - SOAP implementation
- **RabbitMQ** - Message broker
- **Docker** - Containerization
- **OAuth2** - REST API security
- **WS-Security** - SOAP security
- **BPEL** - Business process orchestration
- **H2 Database** - In-memory database for development

---

## ‚úèÔ∏è Project Structure 

<details>
<summary>01-design-artifacts/ ‚Äì Architecture and Design Documentation</summary>

- `architecture-diagrams/` ‚Äì System architecture visuals  
- `governance-policy.md` ‚Äì SOA governance guidelines  
- `soa-design-document.md` ‚Äì Detailed design specifications  

</details>

<details>
<summary>02-catalog-service/ ‚Äì SOAP-based Catalog Service</summary>

- `src/` ‚Äì Service source code  
- `Dockerfile` ‚Äì Container configuration  
- `pom.xml` ‚Äì Maven configuration  

</details>

<details>
<summary>03-orders-service/ ‚Äì REST-based Orders Service</summary>

- `src/` ‚Äì Service implementation  
- `Dockerfile` ‚Äì Container configuration  
- `pom.xml` ‚Äì Maven build config  

</details>

<details>
<summary>04-payments-service/ ‚Äì Payment Processing Service</summary>

- `src/` ‚Äì Service implementation  
- `Dockerfile` ‚Äì Container configuration  
- `pom.xml` ‚Äì Maven build config  

</details>

<details>
<summary>05-shipping-service/ ‚Äì Shipping Management Service</summary>

- `src/` ‚Äì Service implementation  
- `Dockerfile` ‚Äì Container configuration  
- `pom.xml` ‚Äì Maven build config  

</details>

<details>
<summary>06-bpel-orchestration/ ‚Äì Business Process Orchestration</summary>

- `deployment/` ‚Äì BPEL deployment configs  
- `processes/` ‚Äì BPEL process definitions  
- `wsdl/` ‚Äì Service WSDL files  

</details>

<details>
<summary>07-integration/ ‚Äì Integration Components</summary>

- `consumers/` ‚Äì Message consumers  
- `producers/` ‚Äì Event producers  
- `rabbitmq/` ‚Äì Message broker configs  

</details>

<details>
<summary>08-security/ ‚Äì Security Configurations</summary>

- `certificates/` ‚Äì SSL/TLS certificates  
- `oauth2/` ‚Äì OAuth2 configurations  
- `ws-security/` ‚Äì WS-Security settings  

</details>

<details>
<summary>09-testing/ ‚Äì Testing Resources</summary>

- `integration-tests/` ‚Äì Integration test suites  
- `performance/` ‚Äì Performance test scripts  
- `postman/` ‚Äì API test collections  
- `soap-ui/` ‚Äì SOAP service tests  

</details>

<details>
<summary>10-deployment/ ‚Äì Deployment Configurations</summary>

- `docker-compose.yml` ‚Äì Local deployment  
- `kubernetes/` ‚Äì K8s manifests  
- `cloud/` ‚Äì Cloud-specific configs  
- `scripts/` ‚Äì Deployment automation  

</details>

<details>
<summary>11-documentation/ ‚Äì System Documentation</summary>

- `api-docs/` ‚Äì API specifications  

</details>

<details>
<summary>12-reports/ ‚Äì Project Reports</summary>

- `viva-presentation/` ‚Äì Project presentations  

</details>

<details>
<summary>13-scripts/ ‚Äì Utility Scripts</summary>

- `setup-environment.sh` ‚Äì Environment setup  
- `test-soa-workflow.sh` ‚Äì Workflow testing  

</details>

```plaintext
‚îú‚îÄ‚îÄ 01-design-artifacts/          # Architecture and Design Documentation
‚îÇ   ‚îú‚îÄ‚îÄ architecture-diagrams/    # System architecture visuals
‚îÇ   ‚îú‚îÄ‚îÄ governance-policy.md      # SOA governance guidelines
‚îÇ   ‚îî‚îÄ‚îÄ soa-design-document.md    # Detailed design specifications
‚îÇ
‚îú‚îÄ‚îÄ 02-catalog-service/           # SOAP-based Catalog Service
‚îÇ   ‚îú‚îÄ‚îÄ src/                      # Service source code
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                # Container configuration
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml                   # Maven configuration
‚îÇ
‚îú‚îÄ‚îÄ 03-orders-service/            # REST-based Orders Service
‚îÇ   ‚îú‚îÄ‚îÄ src/                      # Service implementation
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                # Container configuration
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml                   # Maven build config
‚îÇ
‚îú‚îÄ‚îÄ 04-payments-service/          # Payment Processing Service
‚îÇ   ‚îú‚îÄ‚îÄ src/                      # Service implementation
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                # Container configuration
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml                   # Maven build config
‚îÇ
‚îú‚îÄ‚îÄ 05-shipping-service/          # Shipping Management Service
‚îÇ   ‚îú‚îÄ‚îÄ src/                      # Service implementation
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                # Container configuration
‚îÇ   ‚îî‚îÄ‚îÄ pom.xml                   # Maven build config
‚îÇ
‚îú‚îÄ‚îÄ 06-bpel-orchestration/        # Business Process Orchestration
‚îÇ   ‚îú‚îÄ‚îÄ deployment/               # BPEL deployment configs
‚îÇ   ‚îú‚îÄ‚îÄ processes/                # BPEL process definitions
‚îÇ   ‚îî‚îÄ‚îÄ wsdl/                     # Service WSDL files
‚îÇ
‚îú‚îÄ‚îÄ 07-integration/               # Integration Components
‚îÇ   ‚îú‚îÄ‚îÄ consumers/                # Message consumers
‚îÇ   ‚îú‚îÄ‚îÄ producers/                # Event producers
‚îÇ   ‚îî‚îÄ‚îÄ rabbitmq/                 # Message broker configs
‚îÇ
‚îú‚îÄ‚îÄ 08-security/                  # Security Configurations
‚îÇ   ‚îú‚îÄ‚îÄ certificates/             # SSL/TLS certificates
‚îÇ   ‚îú‚îÄ‚îÄ oauth2/                   # OAuth2 configurations
‚îÇ   ‚îî‚îÄ‚îÄ ws-security/              # WS-Security settings
‚îÇ
‚îú‚îÄ‚îÄ 09-testing/                   # Testing Resources
‚îÇ   ‚îú‚îÄ‚îÄ integration-tests/        # Integration test suites
‚îÇ   ‚îú‚îÄ‚îÄ performance/              # Performance test scripts
‚îÇ   ‚îú‚îÄ‚îÄ postman/                  # API test collections
‚îÇ   ‚îî‚îÄ‚îÄ soap-ui/                  # SOAP service tests
‚îÇ
‚îú‚îÄ‚îÄ 10-deployment/                # Deployment Configurations
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml        # Local deployment
‚îÇ   ‚îú‚îÄ‚îÄ kubernetes/               # K8s manifests
‚îÇ   ‚îú‚îÄ‚îÄ cloud/                    # Cloud-specific configs
‚îÇ   ‚îî‚îÄ‚îÄ scripts/                  # Deployment automation
‚îÇ
‚îú‚îÄ‚îÄ 11-documentation/             # System Documentation
‚îÇ   ‚îî‚îÄ‚îÄ api-docs/                 # API specifications
‚îÇ
‚îú‚îÄ‚îÄ 12-reports/                   # Project Reports
‚îÇ   ‚îî‚îÄ‚îÄ viva-presentation/        # Project presentations
‚îÇ
‚îî‚îÄ‚îÄ 13-scripts/                   # Utility Scripts
    ‚îú‚îÄ‚îÄ setup-environment.sh      # Environment setup
    ‚îî‚îÄ‚îÄ test-soa-workflow.sh      # Workflow testing
```

---

## üîÉ Contributing  

1. Fork this repo  
2. Create a new feature branch  
3. Commit your changes with tests  
4. Open a pull request for review  

---

## üîñ Final Notes  

This project illustrates how an enterprise-grade book ordering system can be built using **SOA principles combined with modern microservice practices**. With secure SOAP and REST services, RabbitMQ-based event-driven messaging, and BPEL-driven orchestration, the platform demonstrates scalability, fault tolerance, and maintainability. Complete documentation, automated testing, and Docker/Kubernetes deployment support make it a strong reference for building **robust distributed systems** in the enterprise domain.  
